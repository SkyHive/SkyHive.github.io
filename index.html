<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>SkyHive's Blog</title><meta name="author" content="SkyHive"><meta name="copyright" content="SkyHive"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="莫听穿林打叶声，何妨吟啸且徐行"><meta property="og:type" content="website"><meta property="og:title" content="SkyHive&#39;s Blog"><meta property="og:url" content="https://skyhive.github.io/index.html"><meta property="og:site_name" content="SkyHive&#39;s Blog"><meta property="og:description" content="莫听穿林打叶声，何妨吟啸且徐行"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://skyhive.github.io/uploads/avatar.jpg"><meta property="article:author" content="SkyHive"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://skyhive.github.io/uploads/avatar.jpg"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://skyhive.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"SkyHive's Blog",isPost:!1,isHome:!0,isHighlightShrink:!1,isToc:!1,postUpdate:"2024-11-08 17:38:58"}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="SkyHive's Blog" type="application/atom+xml"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/uploads/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image:url(/uploads/banner.jpg)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">SkyHive's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-clock"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="site-info"><h1 id="site-title">SkyHive's Blog</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/skyhive" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:skyhive35@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a><a class="social-icon" href="https://blog.skyhive.tech/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/2069fb37.html" title="工欲善其事之趁手的终端">工欲善其事之趁手的终端</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-10-14T11:49:31.000Z" title="发表于 2024-10-14 19:49:31">2024-10-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">俗话说的好，工欲善其事必先利其器，要想活干得漂亮，就得有一个趁手的兵器。对于运维人来说，一个好的 Terminal，绝对可以大大滴提高工作效率。 曾经的我是 Ubuntu 的无脑吹、脑残粉，主要是命令行配合着一众工具使用起来非常丝滑，效率极高。而在 Windows 上除了安装各种执行环境配置环境变量外，还需要借助 xShell 这类工具来完成我的日常工作，虽然当时也折腾过一段时间的 cmder，但却是没有原生 Terminal 顺滑。 好在巨硬还有良心，推出了 Windows Terminal 和 WSL，一度让我从 Ubuntu 脑残粉变成了 Windows 无脑吹～本文则是用来记录一下我自己的终端配置，因为我的工作环境几乎是跑在 WSL 上的，所以 Linux 和 MacOS 均可借鉴。 ¶ 前置操作 一个 Windows 11 的操作系统 电脑开启虚拟化技术（默认已开启，未开启的则需要进 BIOS 中开启该设置，不同品牌的电脑不一样，请自行 Google） 安装 Windows Terminal（Windows 11 默认已安装，否则请在 Microsoft...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/1b4b0584.html" title="槟城旅行指北">槟城旅行指北</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-09-02T13:50:32.000Z" title="发表于 2024-09-02 21:50:32">2024-09-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Life/">Life</a></span></div><div class="content">2023/12/26 我第一次出国，和女朋友来到了马来西亚，囫囵吞枣式的游玩让我往返了吉隆坡和槟城两座城市，体验了大马的飞机、高铁、轮渡以及地铁这四种交通工具。但也因为是第一次踏上这片陌生的领土，即便之前的准备做得再充分，也难免有很多无法顾及的地方，因此时隔八个月，我们将再次踏上这片熟悉又陌生的领土，特此写下一篇槟城旅行指北（不是游记，不是游记，不是游记） ¶ 前期准备 ¶ 交通 时间 始发地 目的地 航班 2024-08-30 00:15 ~ 05:35 杭州 HGH T4 吉隆坡 KUL T2 D7307 空客 330 2024-08-30 07:50 ~ 08:50 吉隆坡 KUL T2 槟城 PEN D AK6112 空客 320 2024-09-03 11:25 ~ 12:50 槟城 PEN I 新加坡 SIN T1 TR427 空客 321 2024-09-03 16:30 ~ 21:35 新加坡 SIN T1 杭州 HGH T4 TR188 波音 787 本来有一个往返 槟城 和 怡保 的高铁 /...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/ccc2b0d8.html" title="2023 年度总结">2023 年度总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-03-20T07:34:25.000Z" title="发表于 2024-03-20 15:34:25">2024-03-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Life/">Life</a></span></div><div class="content">2023 年过的很快，感觉啥也没干就结束了，但是相比于过去的两年，2023 年过得还是相对比较精彩的： 去了几个城市旅游 开始健身 重新搭建了 home-lab 环境 开始带团队 ¶ 工作 22 年的时候换了工作，从上海搬到杭州，用同样的租金在杭州获得了 50% 的租房面积提升。由于是老牌的 TP 公司，在技术上有很多陈年旧账需要慢慢去修，除了每年要感受两波大促紧锣密鼓的节奏之外，还需要天天吐槽 N 年以前留下来的天坑～ 最大的改变就是从原来的孤军奋战变成了带着小团队进行战斗，再次拓宽了自己的技能点（深感带团队的不易），目前主要遇到的问题如下： 自己的时间不够用，更别提带教 与下属做事的认知差异比较大，自己想把活干到自己认知的 80 分甚至 90 分，但是团队其他人受限于工作经历和认知，大多只知道 60 - 70 分的标准是什么样的 很多运维的观念和认知难以传递，可能也受限于他们过往的经历以及我个人的输出 后续空下来了还是需要多看看团队管理的书来弥补一下这方面的短板。 ¶ 旅游 一年下来，跑了很多地方，基本上就是三个假期 ——...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/58e40093.html" title="nginx 端口转发被强行更改">nginx 端口转发被强行更改</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-02-09T09:50:16.000Z" title="发表于 2024-02-09 17:50:16">2024-02-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">上一篇文章说到在家里把 LB 升了级并且通过 acme.sh 自动配置了 LB 的泛域名证书，可以看到基本的结构如下： 由于这些服务都是运行在家里的服务器中，最终 LB 的 443 端口我是在路由器上通过端口映射的方式转到 8443 端口上的（家庭宽带的公网 IP 会将 80/443 等常用端口封禁）。而我为了优雅（确实不想在公网通过域名加端口的形式访问某个网站或者服务），在公网使用 CDN 来把我对公网映射的 8443 端口转换成了 443。这个做法对于正常的 Web 服务来说没有任何问题，但是对于网盘服务来说就有些伤筋动骨，毕竟网盘服务流量比较大，使用 CDN 的话确实比较费钱。因此对于网盘服务我又单独映射了一个 8888 端口到公网，在金钱面前，我不再选择优雅。 那么对于网盘服务来说，正常的访问路径就是： 乍一看好像挺正常的，但是在我通过公网去访问的是时候 curl https://&lt;domain_name&gt;:8888 出现的结果往往是，nginx 直接把我的 8888 端口给重定向成了 8080，也就是变成了...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/4b4fd36b.html" title="配置 DNSPod 自动获取泛域名证书">配置 DNSPod 自动获取泛域名证书</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-02-05T08:57:07.000Z" title="发表于 2024-02-05 16:57:07">2024-02-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">最近升级了下家里的 LB，通过 gitlab 将 LB 的配置做了版本管理，并且通过 docker-compose 实现 LB 的快速部署。但是家里的网络做了内外网的区分，为了实现内网 https 访问，我需要在内网的 LB 上配置一套 SSL 证书（公网的部分直接在 CDN 上配置了 let's encrypt 的免费证书，一年一换） 为了避免麻烦，对于内网的 https 证书希望做到以下两点： 到期自动续 泛域名 查找了一番，有两个工具比较符合：Certbot 和 acme.sh，都是通过 ACME protocol 去自动获取免费证书，但是需要自动获取泛域名证书的话，还需要能够自动在 DNS Provider 处更新 DNS TXT Record。由于我的域名是在 DNSPod 购买的，因此需要能够支持在 DNSPod 上自动更新 TXT 记录。Certbot 没有对应的官方插件，但是有第三方好心人写的插件能够实现该功能，如 certbot-dns-dnspod；而 acme.sh 是国人写的工具，官方支持 Aliyun 和...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/1aac8d0a.html" title="黑群晖填坑">黑群晖填坑</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-17T03:36:05.000Z" title="发表于 2021-11-17 11:36:05">2021-11-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">前段时间把家里的 NAS 做了一次改造，将用之前用了一年的架构推翻，换上了黑群晖。 故事还得从一年前说起。最初本着折腾的精神，采取了 Bcache+LVM 的方案，简单架构如下： 没有冗余没有备份，对于存储来说是很危险的。当时其实也是纠结了很久，手上有一块 RAID 卡，纠结了半天也没有上 RAID，原因是当时硬盘的配置是 6T*1+4T*3, 如果上了 RAID 就意味着 6T 盘会浪费 2T 空间。 既然如此，干脆一不做二不休，直接上 LVM，然后把重要的数据定时同步出来，正好还有两块 2T 盘，可以拿来做备份使用。结果最后因为太懒，以及 2T 盘没有多余的机器可以让我接入，导致备份的计划迟迟没有落地。 后来考虑到 Bcache 这个东西比较不优雅，这个项目也多年没有人维护更新（主要是存储跑了一年一直没有冗余和备份，比较慌），最终还是考虑换成黑群晖。 换成黑群晖后也多多少少遇到了些问题，这里先记录下来，算是填坑了 ¶ 存储冗余问题 由于短时间内我还不会把 4T 盘都换成 6T，因此正常的 RAID 阵列还是不考虑了，决定使用 SHR（Synology Hybrid...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/680966d1.html" title="什么情况？访问不了虚拟机了？？">什么情况？访问不了虚拟机了？？</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-27T03:59:21.000Z" title="发表于 2021-10-27 11:59:21">2021-10-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">前几日在家中遇到一件有趣的事情，与大家分享一下。 起初我有一套硬件 A，安装了 ESXi 与一些虚拟机，后来将 A 上的数据盘与系统盘（U 盘）拆至硬件 B 上，即 ESXi 从 A 迁移到了 B。闲置下来的硬件 A 就被我拿来安装了黑苹果，然而在黑苹果的路上遇到了很多的坑，例如掉帧、黑色块的问题（显卡驱动），蓝牙鼠标掉线的问题（蓝牙驱动），后来甚至发现这套黑苹果访问不了我的虚拟机们，也访问不到 ESXi。这时的我还很天真的以为是虚拟化和黑苹果之间的问题，Google 了一番未果还是换回了 Windows。 天真我以为这样就已经解决了问题，但结果是并没有什么卵用。同时我发现一直在使用的电脑访问 ESXi 也出现了问题，网络丢包严重，但是访问虚拟机却一点事情也没有。事已至此只能先简单抓包看一下，从硬件 A ping 向 ESXi（硬件 B）的同时，在 ESXi 上使用 tcpdump-uw 进行抓包（通过虚拟机作为跳板机连上 ESXi），结果是硬件 A 正常发送 ARP 请求，但是 ESXi 这里并没有收到 A 发送的请求。 到这里我基本断定是 ARP 的问题，但是为啥...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/16067d8e.html" title="创建本地 APT 仓库">创建本地 APT 仓库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-23T09:21:11.000Z" title="发表于 2021-08-23 17:21:11">2021-08-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶ 背景 由于部分限制级场景无法联通外网，而 MAAS 在部署镜像的过程中，会默认连接 http://archive.ubuntu.com/ubuntu 的源去安装一些依赖包，在无外网环境下，会导致部署失败！因此考虑将 MAAS 在部署过程中的依赖包提前下载好，做成本地的 APT 仓库来解决。 由于 MAAS 需要安装的依赖包并不多（一共 260M 左右），并不需要使用 apt-mirror 去搭建完整的 apt 仓库，我们将需要的依赖包都下载好，使用 apt-fptarchive 来发布我们的仓库。 ¶ 仓库制作 sudo -i ## 先删除本地的缓存的 deb 包 rm -rf /var/cache/apt/archives/*.deb ## 下载依赖包 apt -d reinstall -y amd64-microcode crda freeipmi-common freeipmi-tools grub-common grub-gfxpayload-lists grub-pc-bin grub-pc grub2-common intel-microcode...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/bb5c39fc.html" title="Galera 集群搭建">Galera 集群搭建</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-16T08:22:19.000Z" title="发表于 2021-08-16 16:22:19">2021-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶Galera 简介 Galera Cluster 是基于 MySQL/Innodb 二次开发而成的一个支持 “多主同步” 的数据库主从集群。具备多主、同步复制、高可用等特点。 MariaDB Galera Cluster，由 MariaDB 和 MySQL-wsrep 补丁实现，同 Percona 的 PXC 数据库集群，目前只支持运行在 Linux 系统上。从 MariaDB 10.1 版开始，MariaDB Server 和 MariaDB Galera Server 安装包已经合并，安装 MariaDB 时，Galera 相关依赖安装包会自动安装，像内置的插件或存储引擎一样，通过简单配置即可启用。 ¶Galera 集群状态 查看集群状态 SHOW STATUS LIKE 'wsrep_local_state_comment'; 状态 说明 Open 节点启动成功，尝试连接到集群；如果失败则根据配置退出或者创建新集群 Primary 节点已处于集群中，在新节点加入时，选取 donor 进行数据同步时会产生的状态 Joiner ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/aa1bd7a9.html" title="雾都游记">雾都游记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-22T07:07:20.000Z" title="发表于 2020-10-22 15:07:20">2020-10-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Life/">Life</a></span></div><div class="content">¶ 第一天 18:30 落地，取得托运行李后，自江北机场 T3 航站楼乘坐地铁十号线（鲤鱼池方向）至红土地换乘地铁六号线（茶园方向）至小什字下车（8 号口），马路对面就是宾馆！！ 重庆地铁可使用支付宝刷码进站 宾馆前台在 16F，10-15F 是客房 企业金会员，有双早，但是早饭不好吃 紧承上一条，楼下马路对面就有花市豌杂面（如果不想吃汤面就和老板说要干溜），不想排队等座位的话，可以考虑打包去别的地方吃（隔壁就有类似大食堂的早餐店） 在宾馆休整些许后，步行出发去九村烤脑花（西西推荐，冤有头债有主，觉得不好吃不要找我），步行至洪崖洞店，在附近买了两杯一只酸奶牛后就餐；推荐香菜牛肉、烤茄子、烤鸡翅等 宾馆附近有三家九村烤脑花，分别在来福士、洪崖洞、解放碑，三个店离宾馆差不多距离，来福士店十点关门，所以建议去其他两个店 九村烤脑花是烧烤店，烤脑花为特色菜，其他菜也很好吃，人均 70~80，人越多越划算 吃完回酒店修锅，一夜无事 💤 ¶...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/84d7a5a0.html" title="KVM 填坑">KVM 填坑</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-09-06T09:35:31.000Z" title="发表于 2020-09-06 17:35:31">2020-09-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶1、UEFI 引导问题 支持 KVM 虚拟机使用 UEFI 引导需要安装 OVMF 组件，参考基于 CentOS 安装 KVM。 目前通过 virt-v2v 导入的 ova 且使用 UEFI 启动的虚拟机（from vSphere）再 define domain 的时候会有报错，报错如下： error: Failed to define domain from /tmp/v2vlibvirt20e61b.xml error: unsupported configuration: smm is not available with this QEMU binary 以上报错是 OVMF 的问题，参考：https://access.redhat.com/discussions/3175901 具体是因为因为 “OVMF_CODE.secboot.fd” 固件在当前的 qemu-kvm 中不受支持，RedHat Discussion 上有两种解决方案： 重构 OVMF RPM 包，参考：...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/35b185c.html" title="ESXi 快照机制">ESXi 快照机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-17T15:47:50.000Z" title="发表于 2020-06-17 23:47:50">2020-06-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">Understanding VM Sanpshots in ESXi VMware vSphere 6.7 虚拟机快照原理及 Veeam Backup 备份 vSAN 中的闪存缓存设备设计注意事项 ¶ 初时虚拟磁盘文件 ESXi 虚拟机的存储文件主要为 .vmx、.vmsd、.vmdk 等文件，其中对于 .vmdk 文件： xx.vmdk：该文件保存的是磁盘的元数据，包括 xx-flat.vmdk 和 xx-ctk.vmdk 文件 xx-flat.vmdk：该文件为 Extent Description 二级制文件啊，二级制数据保存在此文件中 xx-ctk.vmdk：该文件为 CTK 文件，CBT（数据块修改跟踪）启动时自动生成 ¶ 快照 快照创建过程中，新增以下文件： **-000001.vmdk **-000001-ctk.vmdk **-000001-delta.vmdk（基础 vmdk 上的变更位图） **-Snapshot*.vmsn（快照状态文件） ¶ 快照创建过程简单描述如下 当虚拟机未创建快照时，虚拟机的读写操作直接在...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/9411b67b.html" title="基于 CentOS 安装 KVM">基于 CentOS 安装 KVM</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-06-10T09:40:03.000Z" title="发表于 2020-06-10 17:40:03">2020-06-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶ 安装操作系统 UEFI 引导或者 Legacy BIOS 引导均可，冲就完事了 ¶ 安装 KVM 及其依赖 ## 先把源换了 yum install -y wget mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo yum makecache ## 安装 epel 源 yum install -y epel-release ## 安装 KVM 以及依赖服务 yum install ntp kvm virt-manager virt-top qemu-kvm qemu-kvm-tools libvirt git vim htop systemctl start libvirtd systemctl enable libvirtd ## 配置 NTP vim...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/77d7dd4e.html" title="Gitlab EE 版本破解">Gitlab EE 版本破解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-05-24T15:24:01.000Z" title="发表于 2020-05-24 23:24:01">2020-05-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶ 环境信息 Ubuntu 16.04 Ruby 环境（Version ≥2.5） ¶ 破解过程 ¶ 安装依赖 ## 确认 ruby 版本最低为 2.5，否则需要升级 sudo apt-add-repository ppa:brightbox/ruby-ng sudo apt update sudo apt install ruby2.5 ruby2.5-dev ## 安装 gitlab ruby 环境依赖 sudo gem install gitlab sudo gem install gitlab-license sudo gem install openssl ¶ 签名 创建 license.rb 文件，并写入一下内容 require 'openssl' require 'gitlab/license' # Generate a key pair. You should do this only once. key_pair = OpenSSL::PKey::RSA.generate(2048) # Write it to a file to use...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/post/e4bc9b91.html" title="DNS 缓存清理">DNS 缓存清理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-04-01T04:34:22.000Z" title="发表于 2020-04-01 12:34:22">2020-04-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Infra/">Infra</a></span></div><div class="content">¶Windows 下清理 # 管理员身份运行 cmd ipconfig /flushdns ¶Linux 下清理 Linux DNS 缓存和 Windows 有些许不同，大部分的 Linux 是没有系统级缓存的，所以通过一些进程便可以达到清理 DNS 缓存的目的以下一份来自 StackOverflow 的解答： On Linux (and probably most Unix), there is no OS-level DNS caching unless nscd is installed and running. Even then, the DNS caching feature of nscd is disabled by default at least in Debian because it’s broken. The practical upshot is that your linux system very very probably does not do any OS-level DNS caching. You can look around...</div></div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/uploads/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">SkyHive</div><div class="author-info-description">莫听穿林打叶声，何妨吟啸且徐行</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" href="https://github.com/skyhive"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/skyhive" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:skyhive35@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a><a class="social-icon" href="https://blog.skyhive.tech/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的小站，这里会分享我的一些技术总结，以及生活日常~</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/2069fb37.html" title="工欲善其事之趁手的终端">工欲善其事之趁手的终端</a><time datetime="2024-10-14T11:49:31.000Z" title="发表于 2024-10-14 19:49:31">2024-10-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/1b4b0584.html" title="槟城旅行指北">槟城旅行指北</a><time datetime="2024-09-02T13:50:32.000Z" title="发表于 2024-09-02 21:50:32">2024-09-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/ccc2b0d8.html" title="2023 年度总结">2023 年度总结</a><time datetime="2024-03-20T07:34:25.000Z" title="发表于 2024-03-20 15:34:25">2024-03-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/58e40093.html" title="nginx 端口转发被强行更改">nginx 端口转发被强行更改</a><time datetime="2024-02-09T09:50:16.000Z" title="发表于 2024-02-09 17:50:16">2024-02-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/4b4fd36b.html" title="配置 DNSPod 自动获取泛域名证书">配置 DNSPod 自动获取泛域名证书</a><time datetime="2024-02-05T08:57:07.000Z" title="发表于 2024-02-05 16:57:07">2024-02-05</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline"><i class="fas fa-folder-open"></i> <span>分类</span></div><ul class="card-category-list" id="aside-cat-list"><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/Blog/"><span class="card-category-list-name">Blog</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/Code/"><span class="card-category-list-name">Code</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/Infra/"><span class="card-category-list-name">Infra</span><span class="card-category-list-count">31</span></a></li><li class="card-category-list-item"><a class="card-category-list-link" href="/categories/Life/"><span class="card-category-list-name">Life</span><span class="card-category-list-count">3</span></a></li></ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/NAS/" style="font-size:1.1em;color:#999">NAS</a> <a href="/tags/%E9%BB%91%E7%BE%A4%E6%99%96/" style="font-size:1.1em;color:#999">黑群晖</a> <a href="/tags/KVM/" style="font-size:1.18em;color:#999ca1">KVM</a> <a href="/tags/Android/" style="font-size:1.1em;color:#999">Android</a> <a href="/tags/env/" style="font-size:1.1em;color:#999">env</a> <a href="/tags/Linux/" style="font-size:1.5em;color:#99a9bf">Linux</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size:1.34em;color:#99a3b0">虚拟化</a> <a href="/tags/PHP/" style="font-size:1.1em;color:#999">PHP</a> <a href="/tags/ESXi/" style="font-size:1.18em;color:#999ca1">ESXi</a> <a href="/tags/Security/" style="font-size:1.1em;color:#999">Security</a> <a href="/tags/MySQL/" style="font-size:1.42em;color:#99a6b7">MySQL</a> <a href="/tags/Ubuntu/" style="font-size:1.42em;color:#99a6b7">Ubuntu</a> <a href="/tags/OSS/" style="font-size:1.18em;color:#999ca1">OSS</a> <a href="/tags/Filesystem/" style="font-size:1.1em;color:#999">Filesystem</a> <a href="/tags/GitLab/" style="font-size:1.18em;color:#999ca1">GitLab</a> <a href="/tags/Arch/" style="font-size:1.1em;color:#999">Arch</a> <a href="/tags/%E6%97%85%E6%B8%B8/" style="font-size:1.18em;color:#999ca1">旅游</a> <a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size:1.1em;color:#999">年度总结</a> <a href="/tags/Network/" style="font-size:1.34em;color:#99a3b0">Network</a> <a href="/tags/Hadoop/" style="font-size:1.1em;color:#999">Hadoop</a> <a href="/tags/%E5%B7%A5%E6%AC%B2%E5%96%84%E5%85%B6%E4%BA%8B/" style="font-size:1.1em;color:#999">工欲善其事</a> <a href="/tags/Apache/" style="font-size:1.1em;color:#999">Apache</a> <a href="/tags/Python/" style="font-size:1.26em;color:#999fa8">Python</a> <a href="/tags/DNS/" style="font-size:1.1em;color:#999">DNS</a> <a href="/tags/Django/" style="font-size:1.1em;color:#999">Django</a> <a href="/tags/terminal/" style="font-size:1.1em;color:#999">terminal</a> <a href="/tags/nginx/" style="font-size:1.1em;color:#999">nginx</a> <a href="/tags/Laptop/" style="font-size:1.1em;color:#999">Laptop</a> <a href="/tags/%E8%AF%81%E4%B9%A6/" style="font-size:1.1em;color:#999">证书</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i> <span>归档</span> <a class="card-more-btn" href="/archives/" title="查看更多"><i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span> <span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span> <span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span> <span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span> <span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span> <span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span> <span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span> <span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span> <span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">43</div></div><div class="webinfo-item"><div class="item-name">运行时间 :</div><div class="item-count" id="runtimeshow" data-publishdate="2017-02-18T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">40k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastpushdate="2024-11-08T09:38:57.936Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2024 By SkyHive</div><div class="framework-info"><span>框架 </span><a href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>